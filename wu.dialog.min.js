/*!
对话框
404315887@qq.com
2014.11.7
2015.12.19

var dialog = wu.dialog({
	css: {}, // 自定义 css
	overlay: true, // 遮罩层
	isOverlayClickClose: true, // 遮罩层点击关闭
	el: null, // 对话框元素 #id
	url: null, // 动态内容 'dialog.html'
	show: false // 是否立即显示
});
dialog.init({...})
dialog.open()
dialog.resize()
dialog.close()

var d2 = wu.dialog.new({...});
*/
+function(wu){var setting={css:{},overlay:true,isOverlayClickClose:true,el:null,url:null,show:false};
var Dialog=function(options){options=options||{};var $overlay,$dialogWp,$el,$flag,elDisplay;$overlay=$('<div class="wu-dialog-overlay">').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"#111",opacity:0.25,zIndex:9999});
$("body").append($overlay.hide());var isOverlayClickClose;$overlay.click(function(){if(isOverlayClickClose){close();}});$dialogWp=$('<div class="wu-dialog-wp">');
$("body").append($dialogWp.hide());var init=function(options){options=options||{};for(var i in setting){options[i]===undefined&&(options[i]=setting[i]);
}isOverlayClickClose=options.isOverlayClickClose;$dialogWp.css("style","").css({position:"fixed",zIndex:99999999,maxWidth:"100%",maxHeight:"100%",}).css(options.css);
if(options.url){$dialogWp.load(options.url,function(){if(options.show){open();setTimeout(function(){resize();},1000);}});}else{$el=$(options.el);if(options.show){open();
}}};var open=function(){$overlay.fadeIn();$dialogWp.show();if(location.hash.lastIndexOf("#dialog")==-1){location.hash+="#dialog";}if(options.el){if(!$flag){$flag=$('<i style="display:none"></i>');
$el.after($flag);}elDisplay=$el.css("display");if(elDisplay=="none"){$el.show();}$dialogWp.append($el);}resize();return this;};var resize=function(){$dialogWp.css({left:(document.body.clientWidth-$dialogWp.outerWidth())/2,top:(window.innerHeight-$dialogWp.outerHeight())/5*2,});
return this;};var close=function(){if(location.hash.lastIndexOf("#dialog")!=-1){history.go(-1);}if($flag){$flag.before($el.css("display",elDisplay));}$overlay.fadeOut();
$dialogWp.hide();return this;};init(options);$(window).resize(function(){resize();});$(window).on("hashchange",function(){if(location.hash.lastIndexOf("#dialog")==-1){close();
}});return{init:init,open:open,resize:resize,close:close};};var singleDialog;wu.dialog=function(options){if(singleDialog){singleDialog.init(options);return singleDialog;
}singleDialog=Dialog(options);return singleDialog;};wu.dialog["new"]=function(options){return Dialog(options);};$("body").on("click","[wu-dialog]",function(e){e.preventDefault();
var options=eval("("+($(this).attr("wu-dialog")||"{}")+")");var href=$(this).attr("href");if(href){options.url=href;}options.show=true;wu.dialog(options);
});}(this.wu||(wu={}));